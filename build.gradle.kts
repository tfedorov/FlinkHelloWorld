/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * To learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.8/samples
 */

plugins {
    java
    id("idea")
    id("com.gradleup.shadow") version "8.3.2"
    application
}

repositories {
    // Maven Central Repository
    mavenCentral()
}

dependencies {
//    implementation("org.apache.flink:flink-streaming-java:1.+")
    implementation("org.apache.flink:flink-core:1.20.0")
    implementation("org.apache.flink:flink-streaming-java:1.20.0")
    implementation("org.apache.flink:flink-runtime:1.20.0") // For Flink runtime execution
    implementation("org.apache.flink:flink-clients:1.20.0") // To manage Flink jobs from the client
//    implementation("org.apache.flink:flink-connector-wikiedits_2.12:1.20.0")

    // SLF4J logging
    //implementation("org.slf4j:slf4j-log4j12:1.7.30") // Log4j binding for SLF4J

    // Table API dependencies
    implementation("org.apache.flink:flink-table-api-java:1.20.0") // Java Table API
    implementation("org.apache.flink:flink-table-api-java-bridge:1.20.0") // Required for bridging DataStream and Table
    implementation("org.apache.flink:flink-table-planner-loader:1.20.0") // Table planner for SQL execution

    testImplementation("org.apache.flink:flink-test-utils:1.20.0")

    testImplementation("org.junit.jupiter:junit-jupiter-api:5.8.1")    // Adding JUnit Jupiter API for writing unit tests
    testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.8.1")    // Adding JUnit Jupiter Engine for running tests

}
application {
    // Replace this with your main class name
    mainClass.set("com.tfedorov.FlinkHelloWorldApp")
}


tasks.test {
    useJUnitPlatform() // Configuring the 'test' task to use the JUnit platform (JUnit 5)
}

tasks.withType<JavaCompile> {
    options.compilerArgs.add("-Xlint:deprecation")  // Adding a compiler argument to show warnings for deprecated APIs
}
